"use strict";(self.webpackChunknodebucket=self.webpackChunknodebucket||[]).push([[548],{4548:(I,u,d)=>{d.r(u),d.d(u,{TaskManagementModule:()=>J});var g=d(6814),c=d(95),p=d(9862),m=d(157),e=d(9468);let T=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-task-management"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"router-outlet")},dependencies:[m.lC],encapsulation:2}),r})();var f=d(459);let k=(()=>{var t;class r{constructor(o){this.http=o}getTask(o){return this.http.get("/api/employees/"+o+"/tasks")}addTask(o,n){return this.http.post("/api/employees/"+o+"/tasks",{task:n})}updateTask(o,n,i){return this.http.put("/api/employees/"+o+"/tasks",{todo:n,done:i})}deleteTask(o,n){return this.http.delete("/api/employees/"+o+"/tasks/"+n)}}return(t=r).\u0275fac=function(o){return new(o||t)(e.LFG(p.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();function _(t,r){if(1&t&&(e.TgZ(0,"div")(1,"div",26),e._uU(2),e.qZA()()),2&t){const s=e.oxw();e.xp6(2),e.hij(" ",s.errorMessage," ")}}function v(t,r){if(1&t&&(e.TgZ(0,"div")(1,"div",27),e._uU(2),e.qZA()()),2&t){const s=e.oxw();e.xp6(2),e.hij(" ",s.successMessage," ")}}function y(t,r){1&t&&(e.TgZ(0,"div")(1,"div",28),e._uU(2,"Please enter a task! "),e._UZ(3,"button",29),e.qZA()())}function b(t,r){1&t&&(e.TgZ(0,"div")(1,"div",28),e._uU(2,"The task field must be at least 3 characters long! "),e._UZ(3,"button",29),e.qZA()())}function Z(t,r){1&t&&(e.TgZ(0,"div")(1,"div",28),e._uU(2,"The task field must be at most 50 characters long! "),e._UZ(3,"button",29),e.qZA()())}function C(t,r){1&t&&(e.TgZ(0,"div")(1,"div",30),e._uU(2," No tasks to do yet! "),e.qZA()())}const h=function(t){return{"background-color":t}};function x(t,r){if(1&t&&e._UZ(0,"button",40),2&t){const s=e.oxw().$implicit;e.s9C("title",s.category.categoryName),e.Q6J("ngStyle",e.VKq(2,h,s.category.backgroundColor))}}function w(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"div",19)(1,"div",31)(2,"div",32)(3,"div",33),e.YNc(4,x,1,4,"button",34),e.TgZ(5,"div"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",32)(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit,a=e.oxw();let l;return e.KtG(a.deleteTask(null!==(l=i._id)&&void 0!==l?l:""))}),e.TgZ(10,"span",37),e._uU(11,"delete"),e.qZA()()()(),e.TgZ(12,"div",38)(13,"button",39),e.NdJ("click",function(){const i=e.CHM(s).$implicit,a=e.oxw();let l;return e.KtG(a.deleteTask(null!==(l=i._id)&&void 0!==l?l:""))}),e._uU(14," Delete "),e.qZA()()()()}if(2&t){const s=r.$implicit;e.xp6(4),e.Q6J("ngIf","other"!=s.category.categoryName),e.xp6(2),e.hij(" ",s.text," ")}}function M(t,r){1&t&&(e.TgZ(0,"div")(1,"div",30),e._uU(2," No tasks done yet! "),e.qZA()())}function A(t,r){if(1&t&&e._UZ(0,"button",40),2&t){const s=e.oxw().$implicit;e.s9C("title",s.category.categoryName),e.Q6J("ngStyle",e.VKq(2,h,s.category.backgroundColor))}}function U(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"div",19)(1,"div",41)(2,"div",32)(3,"div",33),e.YNc(4,A,1,4,"button",34),e.TgZ(5,"div"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",32)(8,"div",35)(9,"button",36),e.NdJ("click",function(){const i=e.CHM(s).$implicit,a=e.oxw();let l;return e.KtG(a.deleteTask(null!==(l=i._id)&&void 0!==l?l:""))}),e.TgZ(10,"span",37),e._uU(11,"delete"),e.qZA()()()(),e.TgZ(12,"div",38)(13,"button",39),e.NdJ("click",function(){const i=e.CHM(s).$implicit,a=e.oxw();let l;return e.KtG(a.deleteTask(null!==(l=i._id)&&void 0!==l?l:""))}),e._uU(14," Delete "),e.qZA()()()()}if(2&t){const s=r.$implicit;e.xp6(4),e.Q6J("ngIf","other"!=s.category.categoryName),e.xp6(2),e.hij(" ",s.text," ")}}const F=[{path:"",component:T,children:[{path:"my-tasks",component:(()=>{var t;class r{constructor(o,n,i){this.cookieService=o,this.taskService=n,this.fb=i,this.newTaskForm=this.fb.group({text:[null,c.kI.compose([c.kI.required,c.kI.minLength(3),c.kI.maxLength(50)])],category:[null]}),this.employee={},this.todo=[],this.done=[],this.errorMessage="",this.successMessage="",this.empId=parseInt(this.cookieService.get("session_user"),10),this.taskService.getTask(this.empId).subscribe({next:a=>{console.log("emp",a),this.employee=a},error:a=>{console.log("error",a),this.errorMessage=a.message},complete:()=>{console.log("complete"),this.todo=this.employee.todo?this.employee.todo:[],this.done=this.employee.done?this.employee.done:[],console.log("todo",this.todo),console.log("done",this.done)}})}addTask(){const o=this.newTaskForm.controls.text.value,n=this.newTaskForm.controls.category.value;if(!n)return this.errorMessage="Please provide a category",void this.hideAlert();let i=this.getTask(o,n);this.taskService.addTask(this.empId,i).subscribe({next:a=>{console.log("Task added with id",a.id),i._id=a.id,this.todo.push(i),this.newTaskForm.reset(),this.successMessage="Task added successfully",this.hideAlert()},error:a=>{this.errorMessage=a.message,this.hideAlert()}})}deleteTask(o){console.log("Task item: ",o),confirm("Are you sure you want to delete this task?")&&this.taskService.deleteTask(this.empId,o).subscribe({next:n=>{console.log("Task deleted with ID: ",o),this.todo||(this.todo=[]),this.done||(this.done=[]),this.todo=this.todo.filter(i=>i._id?.toString()!==o),this.done=this.done.filter(i=>i._id?.toString()!==o),this.successMessage="Task deleted successfully!",this.hideAlert()},error:n=>{console.log("err",n),this.errorMessage=n.message,this.hideAlert()}})}hideAlert(){setTimeout(()=>{this.errorMessage="",this.successMessage=""},3e3)}getTask(o,n){let i={};switch(n){case"testing":return i={text:o,category:{categoryName:n,backgroundColor:"#1a472a"}},i;case"meetings":return i={text:o,category:{categoryName:n,backgroundColor:"#5d5d5d"}},i;case"projects":return i={text:o,category:{categoryName:n,backgroundColor:"#000000"}},i;default:return i={text:o,category:{categoryName:n,backgroundColor:"#FFFFFF"}},i}}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(f.N),e.Y36(k),e.Y36(c.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-tasks"]],decls:49,vars:11,consts:[[1,"container-fluid","pt-2",2,"min-height","600px"],[1,"font-yellow","text-center"],[1,"row","justify-content-center","p4"],[1,"col-sm-10","col-md-8","col-lg-6"],[4,"ngIf"],[1,"row","justify-content-center","pt-4"],[3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["type","text","formControlName","text","placeholder","Add a new task","aria-label","Add a new task","aria-describedby","btnAdd",1,"form-control","bg-slytherin3","font-yellow"],["type","submit","id","btnAdd",1,"btn","btn-outline-secondary","font-yellow",3,"disabled"],[1,"form-check","form-check-inline"],["type","radio","formControlName","category","name","category","id","testingRadio","value","testing",1,"form-check-input"],["for","testingRadio",1,"form-check-label","font-yellow"],["type","radio","formControlName","category","name","category","id","meetingsRadio","value","meetings",1,"form-check-input"],["for","meetingsRadio",1,"form-check-label","font-yellow"],["type","radio","formControlName","category","name","category","id","projectsRadio","value","projects",1,"form-check-input"],["for","projectsRadio",1,"font-yellow","form-check-label"],["type","radio","formControlName","category","name","category","id","otherRadio","value","other",1,"form-check-input"],["for","otherRadio",1,"form-check-label","font-yellow"],[1,"mt-2"],[1,"row","gy-3","mt-2","justify-content-center"],[1,"col-sm-5","col-md-4","col-lg-3"],[1,"text-center","font-yellow"],[1,"p-3","border","bg-slytherin2"],[1,"container"],["class","mt-2",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger","alert-dismissable","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],[1,"alert","yellow-border","bg-slytherin","font-yellow"],[1,"row","border","bg-slytherin3"],[1,"col-sm-6"],[1,"card-body"],["data-bs-toggle","tooltip","style","width: 25%","class","btn",3,"ngStyle","title",4,"ngIf"],[1,"card-body","float-end"],[1,"btn",3,"click"],[1,"material-icons"],[1,"col-12","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-grid","gap-2","p-2"],[1,"btn","btn-secondary",3,"click"],["data-bs-toggle","tooltip",1,"btn",2,"width","25%",3,"ngStyle","title"],[1,"row","border","bg-white"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"My Tasks"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,_,3,1,"div",4),e.YNc(6,v,3,1,"div",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",3)(9,"form",6),e.NdJ("ngSubmit",function(){return n.addTask()}),e.TgZ(10,"div",7),e._UZ(11,"input",8),e.TgZ(12,"button",9),e._uU(13,"Add"),e.qZA()(),e.TgZ(14,"div",10),e._UZ(15,"input",11),e.TgZ(16,"label",12),e._uU(17,"Testing"),e.qZA()(),e.TgZ(18,"div",10),e._UZ(19,"input",13),e.TgZ(20,"label",14),e._uU(21,"Meetings"),e.qZA()(),e.TgZ(22,"div",10),e._UZ(23,"input",15),e.TgZ(24,"label",16),e._uU(25,"Projects"),e.qZA()(),e.TgZ(26,"div",10),e._UZ(27,"input",17),e.TgZ(28,"label",18),e._uU(29,"Other"),e.qZA()(),e.TgZ(30,"div",19),e.YNc(31,y,4,0,"div",4),e.YNc(32,b,4,0,"div",4),e.YNc(33,Z,4,0,"div",4),e.qZA()()()(),e.TgZ(34,"div",20)(35,"div",21)(36,"h4",22),e._uU(37,"ToDo"),e.qZA(),e.TgZ(38,"div",23)(39,"div",24),e.YNc(40,C,3,0,"div",4),e.YNc(41,w,15,2,"div",25),e.qZA()()(),e.TgZ(42,"div",21)(43,"h4",22),e._uU(44,"Done"),e.qZA(),e.TgZ(45,"div",23)(46,"div",24),e.YNc(47,M,3,0,"div",4),e.YNc(48,U,15,2,"div",25),e.qZA()()()()()),2&o&&(e.xp6(5),e.Q6J("ngIf",n.errorMessage),e.xp6(1),e.Q6J("ngIf",n.successMessage),e.xp6(3),e.Q6J("formGroup",n.newTaskForm),e.xp6(3),e.Q6J("disabled",!n.newTaskForm.valid),e.xp6(19),e.Q6J("ngIf",n.newTaskForm.controls.text.touched&&n.newTaskForm.controls.text.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.newTaskForm.controls.text.touched&&n.newTaskForm.controls.text.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.newTaskForm.controls.text.touched&&n.newTaskForm.controls.text.hasError("maxlength")),e.xp6(7),e.Q6J("ngIf",!n.todo||0===n.todo.length),e.xp6(1),e.Q6J("ngForOf",n.todo),e.xp6(6),e.Q6J("ngIf",!n.done||0===n.done.length),e.xp6(1),e.Q6J("ngForOf",n.done))},dependencies:[g.sg,g.O5,g.PC,c._Y,c.Fj,c._,c.JJ,c.JL,c.sg,c.u],styles:[".font-yellow[_ngcontent-%COMP%]{color:#ff0}.bg-slytherin[_ngcontent-%COMP%]{background-color:#2a623d}.bg-slytherin2[_ngcontent-%COMP%]{background-color:#5d5d5d}.bg-slytherin3[_ngcontent-%COMP%]{background-color:#aaa}.yellow-border[_ngcontent-%COMP%]{border-color:#ff0}"]}),r})(),title:"Nodebucket: My Tasks"}]}];let N=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(F),m.Bz]}),r})(),J=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,c.u5,p.JF,c.UX,m.Bz,N]}),r})()}}]);